<section data-ng-controller="CreateFormController">
	<div class="page-header">
		<h1>New Form</h1>
	</div>
	<blockquote>
		<p>Select field type you want to add to the form below and click
			on 'Add Field' button. Don't forget to set field properties. After
			you finish creating the form, you can preview the form by clicking
			Preview Form button.</p>
	</blockquote>

	<div class="container">
		<div class="form-fields" ng-hide="previewMode">
			<div class="form-properties">
				<h3>Form Properties</h3>
				<div>
					<span>Form Name:</span> <input type="text" name="form-name"
						ng-disabled="previewMode" ng-model="form.form_name">
				</div>
			</div>

			<hr>

			<h3>Fields</h3>
			<div class="add-field">
				<select ng-model="addField.new"
					ng-options="type.name as type.value for type in addField.types"></select>
				<button type="submit" class="btn" ng-click="addNewField()">
					<i class="icon-plus"></i> Add Field
				</button>
			</div>
			<hr>
			<p ng-show="form.form_fields.length == 0">No fields added yet.</p>
			<uib-accordion close-others="accordion.oneAtATime"> <uib-accordion-group
				ng-repeat="field in form.form_fields"> 
				<uib-accordion-heading>
					<span class="glyphicon red pull-right glyphicon-remove" 
						ng-click="deleteField(field.field_id)">
					</span>
					<span>{{field.field_title}}</span>
				</uib-accordion-heading>

			<div class="accordion-edit">


				<div>
					<span>Field ID:</span> <span>{{field.field_id}}</span>
				</div>
				<div>
					<span>Field Type:</span> <span>{{field.field_type}}</span>
				</div>

				<div class="clear"></div>
				<hr>

				<div>
					<span>Field Title:</span> <span> <input type="text"
						ng-model="field.field_title" value="{{field.field_title}}">
					</span>
				</div>
				<div>
					<span>Field Default Value:</span> <span> <input type="text"
						ng-model="field.field_value" value="{{field.field_value}}">
					</span>
				</div>
				<div ng-show="showAddOptions(field)">
					<div>Field Options:</div>
					<div>
						<div ng-repeat="option in field.field_options">
							<input type="text" ng-model="option.option_title"
								value="{{option.option_title}}"> <a
								class="btn btn-danger btn-mini right" type="button"
								ng-click="deleteOption(field, option)"><i
								class="icon-minus icon-white"></i></a> <span
								class="label label-inverse">Value: {{ option.option_value
								}}</span>
						</div>
						<button class="btn btn-primary btn-small" type="button"
							ng-click="addOption(field)">
							<i class="icon-plus icon-white"></i> Add Option
						</button>
					</div>
				</div>

				<div class="clear"></div>
				<hr>

				<div>
					<div>Required:</div>
					<div>
						<label> <input type="radio" ng-value="true" ng-selected
							ng-model="field.field_required" /> &nbsp; Yes
						</label> <label> <input type="radio" ng-value="false"
							ng-model="field.field_required" /> &nbsp; No
						</label>
					</div>
				</div>

				<div class="clear"></div>
				<hr>

				<div>
					<div>Disabled:</div>
					<div>
						<label> <input type="radio" ng-value="true" ng-selected
							ng-model="field.field_disabled" /> &nbsp; Yes
						</label> <label> <input type="radio" ng-value="false"
							ng-model="field.field_disabled" /> &nbsp; No
						</label>
					</div>
				</div>
			</div>
			</uib-accordion-group> </uib-accordion>

			<p class="text-center">
				<button class="btn btn-primary right" type="button"
					ng-click="previewOn()">
					<i class="icon-eye-open icon-white"></i> Preview Form
				</button>
				<button class="btn btn-primary right" type="button"
					ng-click="save()">
					<i class="icon-eye-open icon-white"></i> Save Form
				</button>
				<button class="btn btn-danger right" type="button"
					ng-click="reset()">
					<i class="icon-refresh icon-white"></i> Reset
				</button>
			</p>
			<div data-ng-show="error" class="text-danger">
				<strong data-ng-bind="error"></strong>
			</div>
			<br>
			<hr>

			<div class="text-center">
				<a class="btn btn-small btn-primary" ng-show="!showJson"
					ng-click="showJson = true">Show form json object</a> <a
					class="btn btn-small btn-inverse" ng-show="showJson"
					ng-click="showJson = false">Hide form json object</a><br> <br>
			</div>

			<div ng-show="showJson">
				<h4>Form object content:</h4>
				<pre>{{ form | json }}</pre>
			</div>
		</div>

		<div class="form-fields-preview" ng-show="previewMode">
			<form-directive form="previewForm"></form-directive>

			<p class="text-center">
				<button class="btn btn-primary btn-large right" type="button"
					ng-click="previewOff()">
					<i class="icon-arrow-left icon-white"></i> Back to Create Mode
				</button>
			</p>
		</div>
	</div>

</section>